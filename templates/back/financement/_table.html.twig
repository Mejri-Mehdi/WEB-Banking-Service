<div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
            <tr>
                <th>Client</th>
                <th>Type / Objet</th>
                <th>Montant</th>
                <th>Durée</th>
                <th>Date Demande</th>
                <th>Statut</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for financement in financements %}
                <tr>
                    <td>
                        <div class="fw-bold">{{ financement.client.prenom }} {{ financement.client.nom }}</div>
                        <small class="text-muted">{{ financement.client.email }}</small>
                    </td>
                    <td>
                        <div class="fw-bold">{{ financement.typeDmd|default('Prêt') }}</div>
                        <small class="text-muted">{{ financement.objetFinancement|slice(0, 30) }}...</small>
                    </td>
                    <td class="fw-bold text-primary">{{ financement.montantDemande }} DT</td>
                    <td>{{ financement.dureeMois }} mois</td>
                    <td>{{ financement.dateDemande|date('d/m/Y H:i') }}</td>
                    <td>
                        {% if financement.statut == 'pending' %}
                            <span class="badge bg-warning text-dark">En attente</span>
                        {% elseif financement.statut == 'approved' %}
                            <span class="badge bg-success">Approuvé</span>
                        {% else %}
                            <span class="badge bg-danger">Refusé</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ path('agent_financement_show', {id: financement.id}) }}" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-eye"></i> Voir
                        </a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="7" class="text-center py-5">
                        <i class="bi bi-inbox fs-1 text-muted d-block mb-2"></i>
                        Aucune demande de financement trouvée.
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
